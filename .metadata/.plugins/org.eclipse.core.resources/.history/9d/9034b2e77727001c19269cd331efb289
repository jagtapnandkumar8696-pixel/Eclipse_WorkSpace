package crg.NewAPI;

import java.util.Date;

import org.json.JSONArray;
import org.json.JSONObject;
import org.testng.Assert;
import org.testng.annotations.Test;

import io.restassured.RestAssured;
import io.restassured.response.Response;

public class GetRequest {
	@Test
	 public void getRequestTest()
	 {
		 Response resTest=RestAssured.get("https://fakerestapi.azurewebsites.net/api/v1/Activities");

		 String StrVer=resTest.asString();
		 System.out.println("Azure_GetActivity="+StrVer);
		 int statusCode=resTest.getStatusCode();
		 System.out.println("Status Code ="+statusCode);

		 JSONArray RessJSON=new JSONArray(StrVer);
		 System.out.println("Length="+RessJSON.length());
		 int length=RessJSON.length();
		 
		 for (int i=0;i<length;i++)
		 {
			 
		 

		 JSONObject stOBJ=(JSONObject) RessJSON.get(i);


		 System.out.println("id-"+stOBJ.get("id"));
		 Integer id=(Integer) stOBJ.get("id");
		 String title=(String) stOBJ.get("title");
		 String date=(String) stOBJ.get("dueDate");
		 boolean status= stOBJ.getBoolean("completed");
		 if (title.isEmpty())
		 {
		    Assert.fail("ID/Title/Date is null");
		 }
		
		 }
		 System.out.println("ID/Title/Date is not null");
		 
		 //System.out.println(id+title+date+status);//.get("completed");
	 }
	
	

}
